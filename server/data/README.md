# –°–∏—Å—Ç–µ–º–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `coefficients.json` –Ω–∞ –≤–∞—à –ø–æ–ª–Ω—ã–π JSON —Ñ–∞–π–ª —Å 13000 —Å—Ç—Ä–æ–∫.

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

JSON –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```json
{
  "products": {
    "system_key": {
      "categories": {
        "category_name": {
          "widths": [0.1, 0.2, 0.3, ...],
          "heights": [0.1, 0.2, 0.3, ...],
          "values": [
            [val1, val2, val3, ...],
            [val4, val5, val6, ...],
            ...
          ]
        }
      }
    }
  }
}
```

**–ì–¥–µ:**

- `system_key` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "uni1_zebra", "uni2_roller", –∏ —Ç.–¥.)
- `category_name` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–∫–∞–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "E", "1", "2", "3", "4", "5")
- `widths` - –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π —à–∏—Ä–∏–Ω—ã –≤ –º–µ—Ç—Ä–∞—Ö (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é)
- `heights` - –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π –≤—ã—Å–æ—Ç—ã –≤ –º–µ—Ç—Ä–∞—Ö (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é)
- `values` - –¥–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ [–≤—ã—Å–æ—Ç–∞][—à–∏—Ä–∏–Ω–∞]

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º –≤ –ë–î

–í —Ç–∞–±–ª–∏—Ü–µ `systems` –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ `system_key`, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∫–ª—é—á–∞–º –≤ JSON —Ñ–∞–π–ª–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä:

- –ò–º—è —Å–∏—Å—Ç–µ–º—ã: "Uni1 Zebra Classic"
- System Key: "uni1_zebra"

### 4. API Endpoints

#### –ü–æ–ª—É—á–∏—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç

```
POST /api/coefficients/calculate
{
  "systemKey": "uni1_zebra",
  "category": "E",
  "width": 1.5,
  "height": 2.0
}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ):**

```json
{
  "coefficient": 14.2684,
  "systemKey": "uni1_zebra",
  "category": "E",
  "usedSystemKey": "uni1_zebra",
  "usedCategory": "E",
  "isFallbackCategory": false,
  "width": 1.5,
  "height": 2.0,
  "warning": null
}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**

```json
{
  "coefficient": 14.2684,
  "systemKey": "uni1_zebra",
  "category": "XYZ",
  "usedSystemKey": "uni1_zebra",
  "usedCategory": "1",
  "isFallbackCategory": true,
  "width": 1.5,
  "height": 2.0,
  "warning": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è \"XYZ\" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ \"1\""
}
```

**–û—à–∏–±–∫–∞ (—Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞):**

```json
{
  "message": "–°–∏—Å—Ç–µ–º–∞ \"unknown_system\" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Ñ–∞–π–ª–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤",
  "systemKey": "unknown_system",
  "category": "E",
  "usedSystemKey": null,
  "usedCategory": null
}
```

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–∏—Å—Ç–µ–º

```
GET /api/coefficients/systems
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "systems": ["uni1_zebra", "uni2_roller", ...]
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã

```
GET /api/coefficients/systems/:systemKey/categories
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "systemKey": "uni1_zebra",
  "categories": ["E", "1", "2", "3", "4", "5"]
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Ä–∞–∑–º–µ—Ä–æ–≤

```
GET /api/coefficients/ranges?systemKey=uni1_zebra&category=E
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "systemKey": "uni1_zebra",
  "category": "E",
  "widthRange": { "min": 0.1, "max": 3.0 },
  "heightRange": { "min": 0.1, "max": 3.0 }
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–±–∏–ª–∏–Ω–µ–π–Ω—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é** –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ —Å–µ—Ç–∫–∏.

–ï—Å–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —à–∏—Ä–∏–Ω–∞/–≤—ã—Å–æ—Ç–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Ç–æ—á–∫–∞–º–∏ –≤ –º–∞—Å—Å–∏–≤–µ, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–ª–∏–∂–∞–π—à–∏—Ö 4 —Ç–æ—á–µ–∫.

### –ü—Ä–∏–º–µ—Ä:

–ï—Å–ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å:

- –®–∏—Ä–∏–Ω—ã: [1.0, 1.5, 2.0]
- –í—ã—Å–æ—Ç—ã: [1.5, 2.0, 2.5]

–ê –≤—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ width=1.3, height=1.8, —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏ (1.0,1.5), (1.5,1.5), (1.0,2.0), (1.5,2.0) –∏—Å–ø–æ–ª—å–∑—É—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º—É–ª–∞—Ö

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º—É–ª–µ –∑–∞–∫–∞–∑–∞:

```typescript
const coefficient = await getCoefficient(
  system.systemKey,
  fabric.category,
  order.width / 1000, // –ø–µ—Ä–µ–≤–æ–¥ –º–º –≤ –º–µ—Ç—Ä—ã
  order.height / 1000
);

const price = coefficient * multiplier + additionalCosts;
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- JSON —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
- –ü–æ–∏—Å–∫ –∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ (< 1–º—Å)
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (13000+ —Å—Ç—Ä–æ–∫)

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ (Fallback)

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:

### 1. –ü–æ–∏—Å–∫ —Å–∏—Å—Ç–µ–º—ã (systemKey)

1. **–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ** - –∏—â–µ–º —Ç–æ—á–Ω—ã–π –∫–ª—é—á —Å–∏—Å—Ç–µ–º—ã
2. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –∏ –ø—Ä–æ–±–µ–ª–æ–≤** - –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—â–µ–º —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å—Ç—Ä–æ–∫–∏
3. **–û—à–∏–±–∫–∞** - –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤–æ–æ–±—â–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞

### 2. –ü–æ–∏—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∫–∞–Ω–∏

1. **–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ** - –∏—â–µ–º —Ç–æ—á–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "E")
2. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞** - –∏—â–µ–º –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ ("e" ‚Üí "E")
3. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤** - —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –∏—â–µ–º —Å–Ω–æ–≤–∞
4. **Fallback –Ω–∞ –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é** - –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã

### 3. –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º

- –î–ª—è —Ä–∞–∑–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–±–∏–ª–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è**
- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —É–∑–ª–∞–º–∏ —Å–µ—Ç–∫–∏, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–ª–∏–∂–∞–π—à–∏—Ö 4 —Ç–æ—á–µ–∫

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã fallback:

**–ü—Ä–∏–º–µ—Ä 1: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å –¥—Ä—É–≥–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º**

- –ó–∞–ø—Ä–æ—à–µ–Ω–æ: `systemKey: "uni1_zebra", category: "e"`
- –ù–∞–π–¥–µ–Ω–æ: `category: "E"`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω

**–ü—Ä–∏–º–µ—Ä 2: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å –ø—Ä–æ–±–µ–ª–∞–º–∏**

- –ó–∞–ø—Ä–æ—à–µ–Ω–æ: `systemKey: "uni1_zebra", category: " 1 "`
- –ù–∞–π–¥–µ–Ω–æ: `category: "1"`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω

**–ü—Ä–∏–º–µ—Ä 3: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è**

- –ó–∞–ø—Ä–æ—à–µ–Ω–æ: `systemKey: "uni1_zebra", category: "XYZ"`
- –ù–∞–π–¥–µ–Ω–æ: `category: "1"` (–ø–µ—Ä–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞—è)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ö†Ô∏è –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –±–ª–∏–∂–∞–π—à–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è"

**–ü—Ä–∏–º–µ—Ä 4: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞**

- –ó–∞–ø—Ä–æ—à–µ–Ω–æ: `systemKey: "unknown_system", category: "E"`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå –û—à–∏–±–∫–∞, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

## ‚ö†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "–°–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∫–ª—é—á —Å–∏—Å—Ç–µ–º—ã –≤ —Ñ–∞–π–ª–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤.

**–ü—Ä–∏—á–∏–Ω—ã:**

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `system_key`** - –∫–ª—é—á —Å–∏—Å—Ç–µ–º—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–ª—é—á—É –≤ `coefficients.json`
2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ** - —Å–∏—Å—Ç–µ–º–∞ –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ —Ñ–∞–π–ª–µ `coefficients.json`

**–†–µ—à–µ–Ω–∏–µ:**

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö system_key –∏–∑ coefficients.json
GET /api/coefficients/available-keys

# –û—Ç–≤–µ—Ç:
{
  "systemKeys": ["uni1_zebra", "uni2_roller", "uni3_classic", ...]
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
GET /api/coefficients/available-categories?systemKey=uni1_zebra

# –û—Ç–≤–µ—Ç:
{
  "systemKey": "uni1_zebra",
  "categories": ["E", "1", "2", "3", "4", "5"],
  "count": 6
}
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã

–í —Ä–∞–∑–¥–µ–ª–µ "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º—ã":

1. **–ò–º—è —Å–∏—Å—Ç–µ–º—ã** - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Uni1 Zebra Classic")
2. **System Key** - **–¥–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å** –∫–ª—é—á—É –∏–∑ `coefficients.json` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "uni1_zebra")
3. **–ú–Ω–æ–∂–∏—Ç–µ–ª—å** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏—Ç–æ–≥–æ–≤–æ–π —Ü–µ–Ω—ã

‚ùó **–í–∞–∂–Ω–æ:** `system_key` —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ –¥–æ–ª–∂–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞—Ç—å!

### 4. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∫–∞–Ω–µ–π

–í —Ä–∞–∑–¥–µ–ª–µ "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ ‚Üí –¢–∫–∞–Ω–∏":

1. **–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∫–∞–Ω–∏** - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Blackout Premium")
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** - **–¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å** –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ `coefficients.json` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "E", "1", "2", –∏ —Ç.–¥.)
3. **–¢–∏–ø —Ç–∫–∞–Ω–∏** - roll, zebra –∏ —Ç.–¥.

‚ùó **–í–∞–∂–Ω–æ:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **—Ç–æ—á–Ω–æ** —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –≤ —Ñ–∞–π–ª–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤!

### 5. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

#### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å systemKey —Å–∏—Å—Ç–µ–º—ã

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π systemKey —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º—ã
SELECT id, name, system_key FROM systems WHERE id = 'your_system_id';
```

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ systemKey –≤ —Ñ–∞–π–ª–µ

```bash
GET /api/coefficients/available-keys
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `system_key` –∏–∑ –±–∞–∑—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å–ø–∏—Å–∫–µ.

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–∫–∞–Ω–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–∫–∞–Ω–∏
SELECT id, name, category FROM fabrics WHERE id = 'your_fabric_id';
```

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã

```bash
GET /api/coefficients/available-categories?systemKey=your_system_key
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–∫–∞–Ω–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å–ø–∏—Å–∫–µ.

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:

```bash
POST /api/coefficients/calculate
{
  "systemKey": "uni1_zebra",
  "category": "E",
  "width": 1.5,
  "height": 2.0
}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200):**

```json
{
  "coefficient": 14.2684,
  "systemKey": "uni1_zebra",
  "category": "E",
  "width": 1.5,
  "height": 2.0
}
```

**–û—à–∏–±–∫–∞ (404):**

```json
{
  "message": "–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º—ã \"uni1_zebra\", –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ \"E\"",
  "systemKey": "uni1_zebra",
  "category": "E"
}
```

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏:

1. **–ü—Ä–∏ –≤–≤–æ–¥–µ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–≤–æ—Ä–∫–∏** - –µ—Å–ª–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è** - —Å—Ç–≤–æ—Ä–∫–∞ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º
3. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞** - –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —Å–æ —Å—Ç–≤–æ—Ä–∫–∞–º–∏ –±–µ–∑ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ** - —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –¥–ª—è –∫–∞–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –≤–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö

- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `coefficients.json`
- [ ] –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `systems` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ `system_key`
- [ ] `system_key` —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∫–ª—é—á–æ–º –≤ `coefficients.json`
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∫–∞–Ω–µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –≤ —Ñ–∞–π–ª–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç —á–µ—Ä–µ–∑ API

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

–î–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —É—Ç–∏–ª–∏—Ç—É:

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:

```bash
npm run check:coefficients
```

–í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å–æ –≤—Å–µ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚Ññ ‚îÇ System Key      ‚îÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–π ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1  ‚îÇ uni1_zebra      ‚îÇ 6          ‚îÇ
‚îÇ 2  ‚îÇ uni2_roller     ‚îÇ 5          ‚îÇ
‚îÇ 3  ‚îÇ uni3_classic    ‚îÇ 4          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:

```bash
npm run check:coefficients uni1_zebra
```

–í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚Ññ ‚îÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è ‚îÇ –î–∏–∞–ø–∞–∑–æ–Ω —à–∏—Ä–∏–Ω—ã  ‚îÇ –î–∏–∞–ø–∞–∑–æ–Ω –≤—ã—Å–æ—Ç—ã   ‚îÇ –¢–æ—á–µ–∫ —à–∏—Ä–∏–Ω—ã ‚îÇ –¢–æ—á–µ–∫ –≤—ã—Å–æ—Ç—ã ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1  ‚îÇ E         ‚îÇ 0.1–º - 2.2–º      ‚îÇ 0.1–º - 3.0–º       ‚îÇ 22            ‚îÇ 30             ‚îÇ
‚îÇ 2  ‚îÇ 1         ‚îÇ 0.1–º - 2.2–º      ‚îÇ 0.1–º - 3.0–º       ‚îÇ 22            ‚îÇ 30             ‚îÇ
‚îÇ 3  ‚îÇ 2         ‚îÇ 0.1–º - 2.2–º      ‚îÇ 0.1–º - 3.0–º       ‚îÇ 22            ‚îÇ 30             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–∫–∞–Ω–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
