# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—è (—à–∏—Ä–∏–Ω–∞, –≤—ã—Å–æ—Ç–∞, —Å–∏—Å—Ç–µ–º–∞, —Ç–∫–∞–Ω—å) –≤—ã–∑—ã–≤–∞–ª–æ –Ω–æ–≤—ã–π HTTP-–∑–∞–ø—Ä–æ—Å –∫ API –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:

- **–°–æ—Ç–Ω—è–º –∑–∞–ø—Ä–æ—Å–æ–≤** –ø—Ä–∏ –≤–≤–æ–¥–µ –¥–∞–Ω–Ω—ã—Ö
- **–ú–µ–¥–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–ù–∞–≥—Ä—É–∑–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**
- **–ó–∞–¥–µ—Ä–∂–∫–∞–º –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏** –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

## –†–µ—à–µ–Ω–∏–µ

### 1. **Debounce (–∑–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)**

- –ó–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 800ms** –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤–º–µ—Å—Ç–æ 50 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí **1 –∑–∞–ø—Ä–æ—Å**

### 2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**

- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø–æ –∫–ª—é—á—É: `systemKey_category_width_height`
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞ **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**
- –ö—ç—à –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã

### 3. **–û—Ç–º–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (AbortController)**

- –ü—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
- –ù–µ —Ç—Ä–∞—Ç–∏–º —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 4. **Loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä**

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **—Å–ø–∏–Ω–Ω–µ—Ä** –≤ –ø–æ–ª–µ "–ö–æ—ç—Ñ—Ñ." –≤–æ –≤—Ä–µ–º—è —Ä–∞—Å—á–µ—Ç–∞
- –ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ –Ω–µ –∑–∞–≤–∏—Å–ª–∞

### 5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**

- –†–∞—Å—á–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –†–∞—Å—á–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π) –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–π —Ö—É–∫: `use-coefficient-calculator.ts`

```typescript
const { calculate, clearCache, cleanup } = useCoefficientCalculator();

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
calculate(
  { systemKey, category, width, height },
  (data) => {
    // –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç
    console.log(data.coefficient);
  },
  (error) => {
    // –û—à–∏–±–∫–∞
    console.error(error);
  },
  800 // Debounce 800ms
);
```

### –ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ —Å—Ö–µ–º–µ —Å—Ç–≤–æ—Ä–∫–∏

```typescript
{
  coefficient: string; // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–∑ —Ñ–∞–π–ª–∞
  isCalculating: boolean; // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
}
```

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

**–î–æ:**

```
[–ö–æ—ç—Ñ—Ñ.] [        ]  ‚Üê –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ, –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
```

**–ü–æ—Å–ª–µ:**

```
[–ö–æ—ç—Ñ—Ñ.] [  ‚ü≥  ]    ‚Üê –°–ø–∏–Ω–Ω–µ—Ä –≤–æ –≤—Ä–µ–º—è —Ä–∞—Å—á–µ—Ç–∞
[–ö–æ—ç—Ñ—Ñ.] [ 63.16 ]  ‚Üê –†–µ–∑—É–ª—å—Ç–∞—Ç —Å —Å–∏–Ω–∏–º —Ñ–æ–Ω–æ–º
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ó–∞–ø—Ä–æ—Å–æ–≤:** 50+ ‚Üí 1-2
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–∏–∑ –∫—ç—à–∞)
- **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:** —Å–Ω–∏–∂–µ–Ω–∞ –≤ 50+ —Ä–∞–∑

### UX —É–ª—É—á—à–µ–Ω–∏—è

- ‚úÖ –í–∏–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ù–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ —Ä–∞—Å—á–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω

### –ö–æ–¥

- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ö—É–∫
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —à–∏—Ä–∏–Ω—É "544"

```
–í–≤–æ–¥: 5 ‚Üí –ó–∞–ø—Ä–æ—Å –ù–ï –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–∂–¥–µ–º 800ms)
–í–≤–æ–¥: 4 ‚Üí –ó–∞–ø—Ä–æ—Å –ù–ï –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–∂–¥–µ–º 800ms)
–í–≤–æ–¥: 4 ‚Üí –ó–∞–ø—Ä–æ—Å –ù–ï –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–∂–¥–µ–º 800ms)
–ü–∞—É–∑–∞ 800ms ‚Üí ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –û–î–ò–ù –∑–∞–ø—Ä–æ—Å
```

### 2. –†–µ–∑—É–ª—å—Ç–∞—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è

```
–ó–∞–ø—Ä–æ—Å: uni1_zebra_1_0.544_1.443 ‚Üí API ‚Üí –ö—ç—à
–ü–æ–≤—Ç–æ—Ä: uni1_zebra_1_0.544_1.443 ‚Üí –ö—ç—à ‚Üí –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ!
```

### 3. –û—Ç–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```
–ó–∞–ø—Ä–æ—Å 1: width=500 ‚Üí –ù–∞—á–∞—Ç
–ó–∞–ø—Ä–æ—Å 2: width=544 ‚Üí –ó–∞–ø—Ä–æ—Å 1 –æ—Ç–º–µ–Ω–µ–Ω, –ó–∞–ø—Ä–æ—Å 2 –Ω–∞—á–∞—Ç
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è debounce

–í —Ñ–∞–π–ª–µ `index.tsx`:

```typescript
coefficientCalculator.calculate(
  params,
  onSuccess,
  onError,
  1000 // –ò–∑–º–µ–Ω–∏—Ç—å —Å 800ms –Ω–∞ 1000ms
);
```

### –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –≤—Ä—É—á–Ω—É—é

```typescript
coefficientCalculator.clearCache();
```

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Batch –∑–∞–ø—Ä–æ—Å—ã** - –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
2. **Service Worker** - –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–∏
3. **IndexedDB** - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫—ç—à –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
4. **WebSocket** - real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å hit rate –∫—ç—à–∞


